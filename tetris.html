<html>
<head>
<style type="text/css">
body{
margin:10px;
font-family:sans-serif;
}

.bloc
{
height:20px;
width:18px;
background-color:#000000;
position:absolute;
top:0;
left:80;
border:1px solid blue;


}
</style>

<script type="text/javascript" src="jquery-1.6.1.min.js">
</script>


<script type="text/javascript">
var iu=0;
var m=5;
var j=1;
var q=new Array();
var y;
var s;
for(y=0;y<9;y++)
  {  q[y]=new Array();
     for(s=0;s<9;s++)
       { q[y][s]=0;
       }
  }
var k=new Array(); 
window.onload=xcs;
function xcs()
{ $("#con").html("");
  $("#con").append("<div id='bloc1' class='bloc'></div>");
  $("#stat").html("");
  $("#info").text("use arrow keys to control block's movement");
  
 document.onkeydown=xy;
 var i=0;
 var score=0;

 var o;
 for(o=0;o<9;o++)
  {
     k[o]=0;
     

     
  }
 
function gh(x)
{  
     m=5;   
     i=0;
 var ty=setInterval(function(){$("#bloc"+x).css({"top":"+=5",});
                         i=i+5;
                         fd(i);
                        },50);
function fd(i)
{    var u;
  if(i>189-k[m])
    { clearInterval(ty);
      for(u=0;u<9;u++)
      { if(q[m][u]==0)
          { q[m][u]=j;
           break;}    }
      k[m]=k[m]+20;
      
      j++;
  if(k[m]<200)
    {  lk();
       $("#con").append("<div id=bloc"+j+" class='bloc'></div>");
       score=score+1;
       
      gh(j);}
  else
    {  
     score=score+(iu*9);
     $("#info").html("GAME OVER<br>your score:"+score);
    $("#stat").append("<form action='tetris.html'><input type='submit' value='play again'></form>");
    }
   } 
 }
}
 gh(1);
 




}
function right(x)
{  var xd=$("#bloc"+x).position();
   var xc=xd.top;
   var xc2=200-xc;
   var vf=9+iu;
   for(l=0;l<vf;l++)
{
    if(q[m-1][l]==0)
        break;
  }
  var x3=(l+1-iu)*20;
  if(xc2 >x3)
{
  if(xd.left<180){
 
  $("#bloc"+x).css({"left":"+=20"});
   m=m-1;
   }
}
   
}
function left(x)
{  var xd=$("#bloc"+x).position();
     var xc=xd.top;
   var xc2=200-xc;
   var vf=9+iu;
   for(l=0;l<vf;l++)
{
    if(q[m+1][l]==0)
        break;
  }
  var x3=(l+1-iu)*20;
  if(xc2 >x3)
{
  
  if(xd.left>20){
 
   $("#bloc"+x).css({"left":"-=20"});
   m=m+1;
   
    }
}

}

function xy(e){

if(e.keyCode == 37){
left(j);

} 

if(e.keyCode == 39){
right(j);

} 

}

function lk()
{ var op; var ty=0;var tr;var df;var we;
  for(op=0;op<9;op++)
{    if(q[op][iu]!=0)
        ty=ty+1;
  }
  if(ty==9)
{   for(we=0;we<9;we++)
      { tr=q[we][iu];
         $("#bloc"+tr).css({"display":"none"});
          k[we]=k[we]-20;
               

      
      }
   for(df=1;df<=j;df++)
     {

     $("#bloc"+df).css({"top":"+=20"});  

    }
   
    iu=iu+1;   
 } 


}


</script>




<title>tetris</title>
</head>
<body>

<div id="con" style="border:1px solid black; height:200px;width:200px; ">



</div>
<div id="stat"></div><br>
<div id="info" style="border:1px solid black;height:50px;width:320px;text-align:center;padding:10px;" onclick='lk();'>
use arrow keys to control block's movement</div>


</body>
</html>
